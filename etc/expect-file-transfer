***file transfer using expect***


```bash
-------------------------------------------
# target filename has date
-------------------------------------------
$ ls test-2022-07-17.log
test-2022-07-17.log
$ ls test-2022-07-18.log
test-2022-07-18.log
-------------------------------------------
```


```bash
-------------------------------------------
#!/usr/bin/expect

set TODAY [timestamp -format {%Y-%m-%d}]
set YESTERDAY [exec date -v -1d "+%Y-%m-%d"]

#spawn /usr/bin/scp -P20022  pmd-$TODAY-eclipse.log user@localhost:/home/user
spawn /usr/bin/scp -P20022  pmd-$YESTERDAY-eclipse.log user@localhost:/home/user
set pass "user"
expect {
    password: {send "$pass\r"; exp_continue}
}
-------------------------------------------
```


```bash
-------------------------------------------
# crontab with log(include error)
* * * * * /app/scpconn/scpconn.exp > /app/scpconn/scpconn.log 2>&1
-------------------------------------------
```
